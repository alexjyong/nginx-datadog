load_module /datadog-tests/ngx_http_datadog_module.so;

error_log /dev/stdout debug;

events {
    worker_connections  1024;
}

http {

    datadog_rum on;
    datadog_rum_configuration /datadog-tests/rum_conf.json;

    server {
        root /datadog-tests/html;
        listen       80;
        server_name  localhost;

        location / {
          index  index.html index.htm;
        }

        location /disable_rum {
          #datadog_rum off;
          try_files /index.html =404;
        }

        location /proxy {
          # Not working. WHY?
          # proxy_pass "http://$arg_proxy_host:$arg_proxy_port";
          proxy_pass http://localhost:8081;
        }
    }
}
